C functions and while loop nesting
